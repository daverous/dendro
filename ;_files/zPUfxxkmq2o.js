/*!CK:3006932157!*//*1440993649,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["ljjiu"]); }

__d('legacy:dom-html',['HTML'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.HTML=c('HTML');},3);
__d('TimelineCoverDisclaimer',['Dialog'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k,l){if(i.displayed===undefined){i.displayed=true;}else return;new h().setModal(true).setTitle(j).setBody(k).setButtonsMessage(l).setButtons(h.OK).show();}f.exports=i;},null);
__d('legacy:TimelineCoverDisclaimer',['TimelineCoverDisclaimer'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.TimelineCoverDisclaimer=c('TimelineCoverDisclaimer');},3);
__d('TimelineNavigation',['Arbiter','CSS','DOM','Event','PageTransitions','Parent','ProfileTabUtils','TimelineComponentKeys','TimelineController','URI','$','createArrayFromMixed','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=4,v=110,w=20,x=119,y=328,z=10,aa=3,ba=false,ca=21,da,ea,fa,ga=[],ha=[],ia,ja=0,ka,la=0,ma=0,na,oa=u,pa=false,qa=false,ra=null,sa,ta=false,ua,va,wa=false;function xa(lb,mb,nb){if(!mb.firstChild){j.remove(mb);return;}ha.push(mb);ab(nb.recent);i.removeClass(m.byTag(mb,'li'),'empty');if(ia&&(la>u||ma>0))i.removeClass(ia,'notready');za();if(nb.async){eb();gb();}}function ya(lb,mb,nb){j.remove(m.byTag(mb,'li'));if(!nb.async){na++;}else{la--;eb();gb();}za();}function za(){var lb=ia?0:ca;if(la<=u){var mb=y+x*Math.max(0,u-la)+lb;if(ka)ka.style.width=mb+'px';oa=la;bb();}}function ab(lb){if(lb){ma++;}else la++;bb();}function bb(){if(!ua)return;var lb=Math.max(0,la-u)+ma;if(ja&&ia){j.setContent(ja,lb===0?" ":lb);i.conditionClass(ia,'fbTimelineMoreButtonZero',lb===0);if(!pa)i.conditionShow(ia,lb>0);}}function cb(){var lb=j.scry(r('fbTimelineNavTopRow'),'li.tile'),mb=0,nb=0,ob=Math.max(0,u-oa),pb=false;for(var qb=0;qb<lb.length;qb++){if(lb[qb]==ka||lb[qb]==ia)continue;pb=(mb+ob)%u===0;i.conditionClass(lb[qb],'leftMost',mb!==0&&pb);if(!i.hasClass(lb[qb],'empty'))nb=mb;mb++;}pb=(nb+1+ob)%u===0;var rb=lb.length-1-ob;if(pb){if(pa&&(nb+1+ob)/u<aa){rb=Math.min(rb,nb+u);qa=true;}else rb=nb;}else{var sb=(nb+1+ob)%u;rb=nb+(u-sb);qa=false;}qb=0;for(qb=0;qb<=rb;qb++)if(lb[qb]&&(lb[qb]==ka||lb[qb]==ia)){rb++;}else lb[qb]&&i.hasClass(lb[qb],'empty')&&i.removeClass(lb[qb],'hidden_elem');}function db(lb,mb,nb){var ob=j.scry(lb,'li.tile');if(!mb)mb=0;var pb=false;for(var qb=mb;qb<ob.length;qb++){pb=(qb-nb)%u===0;var rb=ob[qb];i.conditionClass(rb,'leftMost',pb);if(i.hasClass(rb,'empty'))i.removeClass(rb,'hidden_elem');}}function eb(){cb();var lb=t('fbTimelineNavSecondaryRow');lb&&db(lb,0,0);}function fb(){if(!ia)return;if(i.hasClass(ia,'notready'))return;i.toggleClass(ia,'fbTimelineMoreButtonOpen');var lb=t('fbRecentAppTitle');lb&&i.conditionClass(lb,'hidden_elem',ma===0);if(i.hasClass(ia,'fbTimelineMoreButtonOpen')){eb();}else bb();gb();}function gb(){if(ia&&!i.hasClass(ia,'fbTimelineMoreButtonOpen')){da.style.height='';i.removeClass(da,'expanded');}else{var lb=la+(u-oa),mb=(ma>0?z:0)+v*Math.ceil(ma/u)+v*Math.ceil(lb/u)+v*(qa?1:0)+w;i.addClass(da,'expanded');da.style.height=mb+'px';}}function hb(lb){var mb=n.isTimelineTab(lb),nb=m.byClass(da,'fbTimelineTopSectionBase'),ob=t('timeline_tour_toolbar');if(ia){i.removeClass(ia,'fbTimelineMoreButtonOpen');gb();}ob&&i.conditionShow(ob,mb);if(nb)i.conditionClass(nb,'collapsedHead',!mb);}function ib(event){if(wa)return true;if(!m.byTag(event.getTarget(),'a')){var lb=new q(j.find(ka,'a.title').href);if(new q(location).getSubdomain()=="business")lb.setSubdomain("business");l.go(lb.toString());}}function jb(){if(ia)setTimeout(function(){ia.removeAttribute('ajaxify');ia.removeAttribute('rel');},0);ra&&ra.remove();}var kb={UPDATE_PAGE:'TimelineNavigation/updatePage',init:function(lb,mb,nb,ob){if(ba)return;ba=true;da=lb;ia=mb;ea=q.getRequestURI();ka=j.scry(da,'li.about')[0];hb(p.getCurrentKey());pa=ob;h.inform(kb.UPDATE_PAGE);if(ia){ja=j.find(ia,'div.text');ra=k.listen(ia,'click',jb);}sa=r('fbTimelineNavigationLoadContainer');j.appendContent(r('content'),sa);if(ka)va=k.listen(ka,'click',ib);ga.forEach(function(qb){if(!qb[2].remove){xa.apply(this,qb);}else ya.apply(this,qb);});ga=[];var pb=m.byClass(lb,'fbTimelineSection');if(pb)j.scry(pb,'ul.uiButtonGroup').forEach(function(qb){s(qb.childNodes).forEach(function(rb){rb.childNodes.length||j.remove(rb);});if(qb.firstChild){i.addClass(qb.firstChild,'firstItem');}else j.remove(qb);});p.register(o.NAV,kb);},reset:function(){va&&va.remove();va=null;ua&&ua.remove();ua=null;ba=false;da=null;fa=null;ha=[];ia=null;ja=null;ka=null;la=0;ma=0;na=0;oa=u;pa=false;qa=false;sa=null;ta=false;wa=false;},initializeMorePager:function(){if(ua)return;if(ia)ua=k.listen(ia,'click',fb);},registerNav:function(lb,mb,nb){ba?nb.remove?ya.apply(this,arguments):xa.apply(this,arguments):ga.push(arguments);},redraw:function(){eb();gb();},setEditMode:function(lb){wa=lb;}};f.exports=kb;},null);