/*!CK:3418736705!*//*1441684946,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["tdf+2"]); }

__d("XFeedEgoImpressionLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ego\/feed\/logging\/impression\/",{ego_id:{type:"Int",required:true},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true}});},null,{});
__d("XFeedEgoLoadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ego\/feed\/load\/",{loading_id:{type:"String",required:true},ids:{type:"IntVector",required:true},service_id:{type:"String",required:true},replace_data:{type:"String",defaultValue:""},location:{type:"String",defaultValue:""},group_size:{type:"Int",defaultValue:1},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true}});},null,{});
__d('EgoUnitCarousel',['DOM','XFeedEgoImpressionLoggingController','AsyncRequest','Arbiter','XFeedEgoLoadController','csx','BaseUnitCarousel'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;o=babelHelpers.inherits(q,n);p=o&&o.prototype;function q(r){'use strict';p.constructor.call(this,r);k.subscribe('x-out-ego-suggestions',this.onXout.bind(this));}q.prototype.tryLoadMore=function(){'use strict';if(this.hasReq)return;var r=this.grid.childElementCount-this.visibleIndex-this.visibleCount-1;if(r>7)return;var s=h.scry(this.grid,"._34bp")[0];if(!s)return;var t=s.id,u=[],v=this.grid.childNodes,w=v.length-1,x,y;for(var z=0;z<w;++z){var aa=JSON.parse(v[z].getAttribute('data-ft'));if(aa.ego_id)u.push(aa.ego_id);if(aa.qid&&!x)x=aa.qid;if(aa.mf_story_key&&!y)y=aa.mf_story_key;}var ba=l.getURIBuilder().setString('service_id',this.serviceID).setString('location',this.location).setString('loading_id',t).setIntVector('ids',u).setInt('qid',x).setInt('mf_story_key',y).getURI();new j().setURI(ba).setHandler(this.onDone.bind(this)).setErrorHandler(this.onError.bind(this)).send();this.hasReq=true;};q.prototype.logImpressions=function(){'use strict';var r=this.grid.children,s=r.length,t=this.visibleIndex+Math.min(this.visibleCount,s)-1;if(t===s-1)--t;for(var u=this.visibleIndex;u<=t;++u)this.$EgoUnitCarousel1(r[u]);};q.prototype.$EgoUnitCarousel1=function(r){'use strict';var s=JSON.parse(r.getAttribute('data-ft'));if(!s)return;var t=s.ego_id;if(!t)return;if(this.loggedItems[t])return;var u=i.getURIBuilder().setInt('ego_id',t).setInt('qid',s.qid).setInt('mf_story_key',s.mf_story_key).getURI();new j().setURI(u).send();this.loggedItems[t]=true;};f.exports=q;},null);
__d('PYMKUnitCarousel',['CSS','DOM','Event','csx','debounce','cx','EgoUnitCarousel'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;o=babelHelpers.inherits(q,n);p=o&&o.prototype;q.prototype.updateAutoSlideListener=function(){'use strict';this.$PYMKUnitCarousel1();if(this.canSlideLeft())this.$PYMKUnitCarousel2('left',this.visibleIndex+this.visibleCount);if(this.canSlideRight())this.$PYMKUnitCarousel2('right',this.visibleIndex-1);};q.prototype.updateLargePager=function(){'use strict';h.removeClass(this.carousel,"_4iwv");this.$PYMKUnitCarousel3(true);this.$PYMKUnitCarousel3(false);h.conditionClass(this.carousel,"_4iww",this.canSlideLeft()&&this.canSlideRight());};q.prototype.hidePagerButton=function(){'use strict';h.addClass(this.carousel,"_4iwv");};q.prototype.$PYMKUnitCarousel3=function(r){'use strict';var s=r?"_4iwx":"_4iwy",t=r?"_4iwz":"_4iw-";if(r?this.canSlideRight():this.canSlideLeft()){h.removeClass(this.carousel,t);h.removeClass(this.carousel,s);}else{h.addClass(this.carousel,t);setTimeout((function(){h.addClass(this.carousel,s);}).bind(this),500);}};q.prototype.$PYMKUnitCarousel1=function(){'use strict';if(this.$PYMKUnitCarousel4)this.$PYMKUnitCarousel4.remove();this.$PYMKUnitCarousel4=null;if(this.$PYMKUnitCarousel5)this.$PYMKUnitCarousel5.remove();this.$PYMKUnitCarousel5=null;if(this.$PYMKUnitCarousel6)this.$PYMKUnitCarousel6.remove();this.$PYMKUnitCarousel6=null;if(this.$PYMKUnitCarousel7)this.$PYMKUnitCarousel7.remove();this.$PYMKUnitCarousel7=null;};q.prototype.$PYMKUnitCarousel2=function(r,s){'use strict';if(isNaN(s)||r!=='left'&&r!=='right')return;if(r==='left'){var t=l(this.slideLeft.bind(this),1000,this);this.$PYMKUnitCarousel4=j.listen(this.grid.children[s],'mouseover',t);this.$PYMKUnitCarousel6=j.listen(this.grid.children[s],'mouseout',function(){t.reset();});}else{var u=l(this.slideRight.bind(this),1000,this);this.$PYMKUnitCarousel5=j.listen(this.grid.children[s],'mouseover',u);this.$PYMKUnitCarousel7=j.listen(this.grid.children[s],'mouseout',function(){u.reset();});}};q.prototype.toggleXouts=function(r,s,t){'use strict';var u=Math.min(r,s),v=Math.max(r,s),w=this.grid.children;u=Math.max(u,0);v=Math.min(v,w.length-1);var x;for(var y=u;y<=v;++y){x=w[y];var z=i.scry(x,"._l98")[0];if(z)if(t){h.hide(z);}else h.show(z);}};function q(){'use strict';o.apply(this,arguments);}f.exports=q;},null);
__d("XEgoHideLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ego\/feed\/logging\/xout\/",{ego_id:{type:"Int",required:true},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true},service_id:{type:"String",required:true}});},null,{});
__d('PymkXout',['Event','DOM','CSS','Arbiter','XEgoHideLoggingController','AsyncSignal'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={init:function(o,p,q){h.listen(p,'click',(function(event){this._logForItem(o);if(q==='pymk_jewel'||q==='pymk_jewel_first_page'){j.hide(o);}else i.remove(o);var r=event.getTarget().getAttribute('data-pymk-id');if(r)k.inform('x-out-ego-suggestions',{id:r});}).bind(this));},_logForItem:function(o){var p=JSON.parse(o.getAttribute('data-ft'));if(!p)return;if(!p.ego_id)return;var q=l.getURIBuilder().setInt('ego_id',p.ego_id).setInt('qid',p.qid).setInt('mf_story_key',p.mf_story_key).setString('service_id','PYMK').getURI();new m(q,{}).send();}};f.exports=n;},null);